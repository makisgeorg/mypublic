<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyclopt Training Progress Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        .container {
            width: 80%;
            margin: 0 auto;
        }
        .gauge-slider-table {
            width: 100%;
            border-collapse: collapse;
        }
        .gauge-slider-table td {
            vertical-align: top;
            padding: 10px;
            text-align: center;
        }
        .slider-container {
            margin-top: 10px;
        }
        .slider-container label {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Cyclopt Training Progress Dashboard</h1>
        <div id="radar-chart"></div>
        <table class="gauge-slider-table">
            <tr id="gauges-row-1"></tr>
            <tr id="gauges-row-2"></tr>
        </table>
    </div>
    
    <script>
        const skills = ['SQL Injection', 'XSS', 'CSRF', 'Authentication', 'Authorization', 'Encryption', 'Logging', 'Monitoring'];
        const beforeTraining = [3, 2, 4, 3, 2, 3, 2, 3];
        let afterTraining = [5, 4, 5, 4, 4, 5, 4, 5];

        function createRadarChart(afterTraining) {
            const radarData = [
                {
                    type: 'scatterpolar',
                    r: beforeTraining,
                    theta: skills,
                    fill: 'toself',
                    name: 'Before Training'
                },
                {
                    type: 'scatterpolar',
                    r: afterTraining,
                    theta: skills,
                    fill: 'toself',
                    name: 'After Training'
                }
            ];
            const radarLayout = {
                polar: {
                    radialaxis: {
                        visible: true,
                        range: [0, 5]
                    }
                },
                title: "Skill Levels Before and After Cyclopt Training"
            };
            Plotly.newPlot('radar-chart', radarData, radarLayout);
        }

        function createGauge(skill, value, index) {
            const gaugeData = [
                {
                    type: 'indicator',
                    mode: 'gauge+number+delta',
                    value: value,
                    delta: { reference: beforeTraining[index], increasing: { color: 'green' } },
                    gauge: {
                        axis: { range: [0, 5] },
                        bar: { color: 'darkblue' },
                        steps: [
                            { range: [0, beforeTraining[index]], color: 'lightgray' },
                            { range: [beforeTraining[index], 5], color: 'lightgreen' }
                        ]
                    },
                    title: { text: skill }
                }
            ];
            const gaugeLayout = { margin: { t: 0, b: 0 } };

            const gaugeDiv = document.createElement('div');
            gaugeDiv.id = `gauge-${index}`;

            const sliderContainer = document.createElement('div');
            sliderContainer.className = 'slider-container';
            const sliderLabel = document.createElement('label');
            sliderLabel.innerHTML = `${skill} Level: <span id="slider-value-${index}">${value}</span>`;
            const slider = document.createElement('input');
            slider.type = 'range';
            slider.min = '0';
            slider.max = '5';
            slider.step = '0.5';
            slider.value = value;
            slider.oninput = function () {
                afterTraining[index] = parseFloat(this.value);
                document.getElementById(`slider-value-${index}`).innerText = this.value;
                createRadarChart(afterTraining);
                Plotly.restyle(`gauge-${index}`, 'value', [this.value]);
            };

            sliderContainer.appendChild(sliderLabel);
            sliderContainer.appendChild(slider);

            const tableCell = document.createElement('td');
            tableCell.appendChild(gaugeDiv);
            tableCell.appendChild(sliderContainer);

            if (index < 4) {
                document.getElementById('gauges-row-1').appendChild(tableCell);
            } else {
                document.getElementById('gauges-row-2').appendChild(tableCell);
            }

            Plotly.newPlot(gaugeDiv.id, gaugeData, gaugeLayout);
        }

        function init() {
            createRadarChart(afterTraining);
            skills.forEach((skill, index) => createGauge(skill, afterTraining[index], index));
        }

        init();
    </script>
</body>
</html>
